{"id":"y1Mb","dependencies":[{"name":"/Users/neo/Workspace/2022/vymo-source-restful/package.json","includedInParent":true,"mtime":1650639339889},{"name":"/Users/neo/Workspace/2022/vymo-source-restful/node_modules/@apollo/client/core/package.json","includedInParent":true,"mtime":1650476598117},{"name":"tslib","loc":{"line":1,"column":25,"index":25},"parent":"/Users/neo/Workspace/2022/vymo-source-restful/node_modules/@apollo/client/core/QueryInfo.js","resolved":"/Users/neo/Workspace/2022/vymo-source-restful/node_modules/@apollo/client/node_modules/tslib/tslib.es6.js"},{"name":"@wry/equality","loc":{"line":2,"column":22,"index":56},"parent":"/Users/neo/Workspace/2022/vymo-source-restful/node_modules/@apollo/client/core/QueryInfo.js","resolved":"/Users/neo/Workspace/2022/vymo-source-restful/node_modules/@wry/equality/lib/equality.esm.js"},{"name":"../utilities/index.js","loc":{"line":3,"column":71,"index":144},"parent":"/Users/neo/Workspace/2022/vymo-source-restful/node_modules/@apollo/client/core/QueryInfo.js","resolved":"/Users/neo/Workspace/2022/vymo-source-restful/node_modules/@apollo/client/utilities/index.js"},{"name":"./networkStatus.js","loc":{"line":4,"column":57,"index":226},"parent":"/Users/neo/Workspace/2022/vymo-source-restful/node_modules/@apollo/client/core/QueryInfo.js","resolved":"/Users/neo/Workspace/2022/vymo-source-restful/node_modules/@apollo/client/core/networkStatus.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.QueryInfo=void 0,exports.shouldWriteResult=u;var t=require(\"tslib\"),e=require(\"@wry/equality\"),i=require(\"../utilities/index.js\"),s=require(\"./networkStatus.js\"),r=new(i.canUseWeakMap?WeakMap:Map);function o(t,e){var i=t[e];\"function\"==typeof i&&(t[e]=function(){return r.set(t,(r.get(t)+1)%1e15),i.apply(this,arguments)})}function a(t){t.notifyTimeout&&(clearTimeout(t.notifyTimeout),t.notifyTimeout=void 0)}var n=function(){function n(t,e){void 0===e&&(e=t.generateQueryId()),this.queryId=e,this.listeners=new Set,this.document=null,this.lastRequestId=1,this.subscriptions=new Set,this.stopped=!1,this.dirty=!1,this.observableQuery=null;var i=this.cache=t.cache;r.has(i)||(r.set(i,0),o(i,\"evict\"),o(i,\"modify\"),o(i,\"reset\"))}return n.prototype.init=function(t){var i=t.networkStatus||s.NetworkStatus.loading;return this.variables&&this.networkStatus!==s.NetworkStatus.loading&&!(0,e.equal)(this.variables,t.variables)&&(i=s.NetworkStatus.setVariables),(0,e.equal)(t.variables,this.variables)||(this.lastDiff=void 0),Object.assign(this,{document:t.document,variables:t.variables,networkError:null,graphQLErrors:this.graphQLErrors||[],networkStatus:i}),t.observableQuery&&this.setObservableQuery(t.observableQuery),t.lastRequestId&&(this.lastRequestId=t.lastRequestId),this},n.prototype.reset=function(){a(this),this.lastDiff=void 0,this.dirty=!1},n.prototype.getDiff=function(t){void 0===t&&(t=this.variables);var i=this.getDiffOptions(t);if(this.lastDiff&&(0,e.equal)(i,this.lastDiff.options))return this.lastDiff.diff;this.updateWatch(this.variables=t);var s=this.observableQuery;if(s&&\"no-cache\"===s.options.fetchPolicy)return{complete:!1};var r=this.cache.diff(i);return this.updateLastDiff(r,i),r},n.prototype.updateLastDiff=function(t,e){this.lastDiff=t?{diff:t,options:e||this.getDiffOptions()}:void 0},n.prototype.getDiffOptions=function(t){var e;return void 0===t&&(t=this.variables),{query:this.document,variables:t,returnPartialData:!0,optimistic:!0,canonizeResults:null===(e=this.observableQuery)||void 0===e?void 0:e.options.canonizeResults}},n.prototype.setDiff=function(t){var i=this,s=this.lastDiff&&this.lastDiff.diff;this.updateLastDiff(t),this.dirty||(0,e.equal)(s&&s.result,t&&t.result)||(this.dirty=!0,this.notifyTimeout||(this.notifyTimeout=setTimeout(function(){return i.notify()},0)))},n.prototype.setObservableQuery=function(t){var e=this;t!==this.observableQuery&&(this.oqListener&&this.listeners.delete(this.oqListener),this.observableQuery=t,t?(t.queryInfo=this,this.listeners.add(this.oqListener=function(){e.getDiff().fromOptimisticTransaction?t.observe():t.reobserve()})):delete this.oqListener)},n.prototype.notify=function(){var t=this;a(this),this.shouldNotify()&&this.listeners.forEach(function(e){return e(t)}),this.dirty=!1},n.prototype.shouldNotify=function(){if(!this.dirty||!this.listeners.size)return!1;if((0,s.isNetworkRequestInFlight)(this.networkStatus)&&this.observableQuery){var t=this.observableQuery.options.fetchPolicy;if(\"cache-only\"!==t&&\"cache-and-network\"!==t)return!1}return!0},n.prototype.stop=function(){if(!this.stopped){this.stopped=!0,this.reset(),this.cancel(),this.cancel=n.prototype.cancel,this.subscriptions.forEach(function(t){return t.unsubscribe()});var t=this.observableQuery;t&&t.stopPolling()}},n.prototype.cancel=function(){},n.prototype.updateWatch=function(i){var s=this;void 0===i&&(i=this.variables);var r=this.observableQuery;if(!r||\"no-cache\"!==r.options.fetchPolicy){var o=(0,t.__assign)((0,t.__assign)({},this.getDiffOptions(i)),{watcher:this,callback:function(t){return s.setDiff(t)}});this.lastWatch&&(0,e.equal)(o,this.lastWatch)||(this.cancel(),this.cancel=this.cache.watch(this.lastWatch=o))}},n.prototype.resetLastWrite=function(){this.lastWrite=void 0},n.prototype.shouldWrite=function(t,i){var s=this.lastWrite;return!(s&&s.dmCount===r.get(this.cache)&&(0,e.equal)(i,s.variables)&&(0,e.equal)(t.data,s.result.data))},n.prototype.markResult=function(t,e,s){var o=this;this.graphQLErrors=(0,i.isNonEmptyArray)(t.errors)?t.errors:[],this.reset(),\"no-cache\"===e.fetchPolicy?this.updateLastDiff({result:t.data,complete:!0},this.getDiffOptions(e.variables)):0!==s&&(u(t,e.errorPolicy)?this.cache.performTransaction(function(i){if(o.shouldWrite(t,e.variables))i.writeQuery({query:o.document,data:t.data,variables:e.variables,overwrite:1===s}),o.lastWrite={result:t,variables:e.variables,dmCount:r.get(o.cache)};else if(o.lastDiff&&o.lastDiff.diff.complete)return void(t.data=o.lastDiff.diff.result);var a=o.getDiffOptions(e.variables),n=i.diff(a);o.stopped||o.updateWatch(e.variables),o.updateLastDiff(n,a),n.complete&&(t.data=n.result)}):this.lastWrite=void 0)},n.prototype.markReady=function(){return this.networkError=null,this.networkStatus=s.NetworkStatus.ready},n.prototype.markError=function(t){return this.networkStatus=s.NetworkStatus.error,this.lastWrite=void 0,this.reset(),t.graphQLErrors&&(this.graphQLErrors=t.graphQLErrors),t.networkError&&(this.networkError=t.networkError),t},n}();function u(t,e){void 0===e&&(e=\"none\");var s=\"ignore\"===e||\"all\"===e,r=!(0,i.graphQLResultHasError)(t);return!r&&s&&t.data&&(r=!0),r}exports.QueryInfo=n;"},"sourceMaps":null,"error":null,"hash":"2a7955636e345d316d9517c0896c3f08","cacheData":{"env":{}}}
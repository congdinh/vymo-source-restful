{"id":"KJFf","dependencies":[{"name":"/Users/neo/Workspace/2022/vymo-source-restful/package.json","includedInParent":true,"mtime":1650639339889},{"name":"/Users/neo/Workspace/2022/vymo-source-restful/node_modules/@apollo/client/core/package.json","includedInParent":true,"mtime":1650476598117},{"name":"tslib","loc":{"line":1,"column":36,"index":36},"parent":"/Users/neo/Workspace/2022/vymo-source-restful/node_modules/@apollo/client/core/ObservableQuery.js","resolved":"/Users/neo/Workspace/2022/vymo-source-restful/node_modules/@apollo/client/node_modules/tslib/tslib.es6.js"},{"name":"../utilities/globals/index.js","loc":{"line":2,"column":26,"index":71},"parent":"/Users/neo/Workspace/2022/vymo-source-restful/node_modules/@apollo/client/core/ObservableQuery.js","resolved":"/Users/neo/Workspace/2022/vymo-source-restful/node_modules/@apollo/client/utilities/globals/index.js"},{"name":"@wry/equality","loc":{"line":3,"column":22,"index":126},"parent":"/Users/neo/Workspace/2022/vymo-source-restful/node_modules/@apollo/client/core/ObservableQuery.js","resolved":"/Users/neo/Workspace/2022/vymo-source-restful/node_modules/@wry/equality/lib/equality.esm.js"},{"name":"./networkStatus.js","loc":{"line":4,"column":56,"index":199},"parent":"/Users/neo/Workspace/2022/vymo-source-restful/node_modules/@apollo/client/core/ObservableQuery.js","resolved":"/Users/neo/Workspace/2022/vymo-source-restful/node_modules/@apollo/client/core/networkStatus.js"},{"name":"../utilities/index.js","loc":{"line":5,"column":156,"index":377},"parent":"/Users/neo/Workspace/2022/vymo-source-restful/node_modules/@apollo/client/core/ObservableQuery.js","resolved":"/Users/neo/Workspace/2022/vymo-source-restful/node_modules/@apollo/client/utilities/index.js"}],"generated":{"js":"\"use strict\";Object.defineProperty(exports,\"__esModule\",{value:!0}),exports.ObservableQuery=void 0,exports.applyNextFetchPolicy=h,exports.logMissingFieldErrors=c;var e=require(\"tslib\"),t=require(\"../utilities/globals/index.js\"),r=require(\"@wry/equality\"),s=require(\"./networkStatus.js\"),i=require(\"../utilities/index.js\"),o=Object.assign,a=Object.hasOwnProperty,n=!1,u=function(u){function h(e){var t=e.queryManager,r=e.queryInfo,s=e.options,o=u.call(this,function(t){try{var r=t._subscription._observer;r&&!r.error&&(r.error=l)}catch(e){}var s=!o.observers.size;o.observers.add(t);var i=o.last;return i&&i.error?t.error&&t.error(i.error):i&&i.result&&t.next&&t.next(i.result),s&&o.reobserve().catch(function(){}),function(){o.observers.delete(t)&&!o.observers.size&&o.tearDownQuery()}})||this;o.observers=new Set,o.subscriptions=new Set,o.isTornDown=!1,o.options=s,o.queryId=r.queryId||t.generateQueryId();var a=(0,i.getOperationDefinition)(s.query);return o.queryName=a&&a.name&&a.name.value,o.initialFetchPolicy=s.fetchPolicy||\"cache-first\",o.queryManager=t,o.queryInfo=r,o}return(0,e.__extends)(h,u),Object.defineProperty(h.prototype,\"variables\",{get:function(){return this.options.variables},enumerable:!1,configurable:!0}),h.prototype.result=function(){var e=this;return new Promise(function(t,r){var s={next:function(r){t(r),e.observers.delete(s),e.observers.size||e.queryManager.removeQuery(e.queryId),setTimeout(function(){i.unsubscribe()},0)},error:r},i=e.subscribe(s)})},h.prototype.getCurrentResult=function(t){void 0===t&&(t=!0);var i=this.getLastResult(!0),o=this.queryInfo.networkStatus||i&&i.networkStatus||s.NetworkStatus.ready,a=(0,e.__assign)((0,e.__assign)({},i),{loading:(0,s.isNetworkRequestInFlight)(o),networkStatus:o}),n=this.options.fetchPolicy,u=void 0===n?\"cache-first\":n;if(\"network-only\"===u||\"no-cache\"===u||\"standby\"===u||this.queryManager.transform(this.options.query).hasForcedResolvers);else{var l=this.queryInfo.getDiff();(l.complete||this.options.returnPartialData)&&(a.data=l.result),(0,r.equal)(a.data,{})&&(a.data=void 0),l.complete?(delete a.partial,!l.complete||a.networkStatus!==s.NetworkStatus.loading||\"cache-first\"!==u&&\"cache-only\"!==u||(a.networkStatus=s.NetworkStatus.ready,a.loading=!1)):a.partial=!0,!__DEV__||l.complete||this.options.partialRefetch||a.loading||a.data||a.error||c(l.missing)}return t&&this.updateLastResult(a),a},h.prototype.isDifferentFromLastResult=function(e){return!this.last||!(0,r.equal)(this.last.result,e)},h.prototype.getLast=function(e,t){var s=this.last;if(s&&s[e]&&(!t||(0,r.equal)(s.variables,this.variables)))return s[e]},h.prototype.getLastResult=function(e){return this.getLast(\"result\",e)},h.prototype.getLastError=function(e){return this.getLast(\"error\",e)},h.prototype.resetLastResults=function(){delete this.last,this.isTornDown=!1},h.prototype.resetQueryStoreErrors=function(){this.queryManager.resetErrors(this.queryId)},h.prototype.refetch=function(o){var n,u={pollInterval:0},l=this.options.fetchPolicy;if(u.fetchPolicy=\"cache-and-network\"===l?l:\"no-cache\"===l?\"no-cache\":\"network-only\",__DEV__&&o&&a.call(o,\"variables\")){var c=(0,i.getQueryDefinition)(this.options.query),h=c.variableDefinitions;h&&h.some(function(e){return\"variables\"===e.variable.name.value})||__DEV__&&t.invariant.warn(\"Called refetch(\".concat(JSON.stringify(o),\") for query \").concat((null===(n=c.name)||void 0===n?void 0:n.value)||JSON.stringify(c),\", which does not declare a $variables variable.\\nDid you mean to call refetch(variables) instead of refetch({ variables })?\"))}return o&&!(0,r.equal)(this.options.variables,o)&&(u.variables=this.options.variables=(0,e.__assign)((0,e.__assign)({},this.options.variables),o)),this.queryInfo.resetLastWrite(),this.reobserve(u,s.NetworkStatus.refetch)},h.prototype.fetchMore=function(r){var i=this,o=(0,e.__assign)((0,e.__assign)({},r.query?r:(0,e.__assign)((0,e.__assign)((0,e.__assign)({},this.options),r),{variables:(0,e.__assign)((0,e.__assign)({},this.options.variables),r.variables)})),{fetchPolicy:\"no-cache\"}),a=this.queryManager.generateQueryId();return o.notifyOnNetworkStatusChange&&(this.queryInfo.networkStatus=s.NetworkStatus.fetchMore,this.observe()),this.queryManager.fetchQuery(a,o,s.NetworkStatus.fetchMore).then(function(e){var s=e.data,a=r.updateQuery;return a?(__DEV__&&!n&&(__DEV__&&t.invariant.warn(\"The updateQuery callback for fetchMore is deprecated, and will be removed\\nin the next major version of Apollo Client.\\n\\nPlease convert updateQuery functions to field policies with appropriate\\nread and merge functions, or use/adapt a helper function (such as\\nconcatPagination, offsetLimitPagination, or relayStylePagination) from\\n@apollo/client/utilities.\\n\\nThe field policy system handles pagination more effectively than a\\nhand-written updateQuery function, and you only need to define the policy\\nonce, rather than every time you call fetchMore.\"),n=!0),i.updateQuery(function(e){return a(e,{fetchMoreResult:s,variables:o.variables})})):i.queryManager.cache.writeQuery({query:o.query,variables:o.variables,data:s}),e}).finally(function(){i.queryManager.stopQuery(a),i.reobserve()})},h.prototype.subscribeToMore=function(e){var r=this,s=this.queryManager.startGraphQLSubscription({query:e.document,variables:e.variables,context:e.context}).subscribe({next:function(t){var s=e.updateQuery;s&&r.updateQuery(function(e,r){var i=r.variables;return s(e,{subscriptionData:t,variables:i})})},error:function(r){e.onError?e.onError(r):__DEV__&&t.invariant.error(\"Unhandled GraphQL subscription error\",r)}});return this.subscriptions.add(s),function(){r.subscriptions.delete(s)&&s.unsubscribe()}},h.prototype.setOptions=function(e){return this.reobserve(e)},h.prototype.setVariables=function(e){return(0,r.equal)(this.variables,e)?this.observers.size?this.result():Promise.resolve():(this.options.variables=e,this.observers.size?this.reobserve({fetchPolicy:this.initialFetchPolicy,variables:e},s.NetworkStatus.setVariables):Promise.resolve())},h.prototype.updateQuery=function(e){var t=this.queryManager,r=e(t.cache.diff({query:this.options.query,variables:this.variables,returnPartialData:!0,optimistic:!1}).result,{variables:this.variables});r&&(t.cache.writeQuery({query:this.options.query,data:r,variables:this.variables}),t.broadcastQueries())},h.prototype.startPolling=function(e){this.options.pollInterval=e,this.updatePolling()},h.prototype.stopPolling=function(){this.options.pollInterval=0,this.updatePolling()},h.prototype.fetch=function(e,t){return this.queryManager.setObservableQuery(this),this.queryManager.fetchQueryObservable(this.queryId,e,t)},h.prototype.updatePolling=function(){var e=this;if(!this.queryManager.ssrMode){var r=this.pollingInfo,i=this.options.pollInterval;if(i){if(!r||r.interval!==i){__DEV__?(0,t.invariant)(i,\"Attempted to start a polling query without a polling interval.\"):(0,t.invariant)(i,10),(r||(this.pollingInfo={})).interval=i;var o=function(){e.pollingInfo&&((0,s.isNetworkRequestInFlight)(e.queryInfo.networkStatus)?a():e.reobserve({fetchPolicy:\"network-only\"},s.NetworkStatus.poll).then(a,a))},a=function(){var t=e.pollingInfo;t&&(clearTimeout(t.timeout),t.timeout=setTimeout(o,t.interval))};a()}}else r&&(clearTimeout(r.timeout),delete this.pollingInfo)}},h.prototype.updateLastResult=function(t,r){return void 0===r&&(r=this.variables),this.last=(0,e.__assign)((0,e.__assign)({},this.last),{result:this.queryManager.assumeImmutableResults?t:(0,i.cloneDeep)(t),variables:r}),(0,i.isNonEmptyArray)(t.errors)||delete this.last.error,this.last},h.prototype.reobserve=function(t,a){var n=this;this.isTornDown=!1;var u=a===s.NetworkStatus.refetch||a===s.NetworkStatus.fetchMore||a===s.NetworkStatus.poll,l=this.options.variables,c=u?(0,i.compact)(this.options,t):o(this.options,(0,i.compact)(t));u||(this.updatePolling(),t&&t.variables&&!t.fetchPolicy&&!(0,r.equal)(t.variables,l)&&(c.fetchPolicy=this.initialFetchPolicy,void 0===a&&(a=s.NetworkStatus.setVariables)));var h=c.variables&&(0,e.__assign)({},c.variables),p=this.fetch(c,a),v={next:function(e){n.reportResult(e,h)},error:function(e){n.reportError(e,h)}};return u||(this.concast&&this.observer&&this.concast.removeObserver(this.observer,!0),this.concast=p,this.observer=v),p.addObserver(v),p.promise},h.prototype.observe=function(){this.reportResult(this.getCurrentResult(!1),this.variables)},h.prototype.reportResult=function(e,t){var r=this.getLastError();(r||this.isDifferentFromLastResult(e))&&((r||!e.partial||this.options.returnPartialData)&&this.updateLastResult(e,t),(0,i.iterateObserversSafely)(this.observers,\"next\",e))},h.prototype.reportError=function(t,r){var o=(0,e.__assign)((0,e.__assign)({},this.getLastResult()),{error:t,errors:t.graphQLErrors,networkStatus:s.NetworkStatus.error,loading:!1});this.updateLastResult(o,r),(0,i.iterateObserversSafely)(this.observers,\"error\",this.last.error=t)},h.prototype.hasObservers=function(){return this.observers.size>0},h.prototype.tearDownQuery=function(){this.isTornDown||(this.concast&&this.observer&&(this.concast.removeObserver(this.observer),delete this.concast,delete this.observer),this.stopPolling(),this.subscriptions.forEach(function(e){return e.unsubscribe()}),this.subscriptions.clear(),this.queryManager.stopQuery(this.queryId),this.observers.clear(),this.isTornDown=!0)},h}(i.Observable);function l(e){__DEV__&&t.invariant.error(\"Unhandled error\",e.message,e.stack)}function c(e){__DEV__&&e&&__DEV__&&t.invariant.debug(\"Missing cache result fields: \".concat(JSON.stringify(e)),e)}function h(e){var t=e.fetchPolicy,r=void 0===t?\"cache-first\":t,s=e.nextFetchPolicy;s&&(e.fetchPolicy=\"function\"==typeof s?s.call(e,r):s)}exports.ObservableQuery=u,(0,i.fixObservableSubclass)(u);"},"sourceMaps":null,"error":null,"hash":"821217c08907df1091e30004ccda5ba3","cacheData":{"env":{}}}